<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <meta name="msapplication-tap-highlight" content="no" />
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="third_party/jquery-2.1.1.min.js"></script>
        <title>Main Menu</title>
    </head>
    <body>
      <h1 id="header">loading...</h1>
      <br/>
      <a href="game.html">Play!</a>
      <script>
        var host = 'http://192.168.1.10:3000/';
        document.addEventListener('deviceready', function() {
            document.getElementById('header').innerHTML = "Hello World";
            chrome.identity.getAuthToken({ 'interactive': true }, function (token, account) {
                if (chrome.runtime.lastError) {
                    navigator.app.exitApp();
                    return;
                }
                document.getElementById('header').innerHTML = "Hello " + account;
                $.ajax({ url: host + 'authorize', data: { token: token, email: account} }).done(function(data) {
                    console.log("account verified");
                }).fail(function() {
                    navigator.app.exitApp();
                    return;
                });
                console.log(token);
                console.log(account);
            });
        }, false);
      </script>
    </body>
</html>
